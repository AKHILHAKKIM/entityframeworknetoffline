



<!DOCTYPE html>

<html>
<head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=EDGE;chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>
	Configure One-to-Many Relationship in Entity Framework 6
</title><link href="../App_Themes/bs/bootstrap.min.css" rel="stylesheet" /><link href="http://www.entityframeworktutorial.net/App_Themes/css/eftstyle.min.css?v=1.9" rel="stylesheet" type="text/css" />
    

    <!--[if lt IE 9]>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <meta id="ctl00_head_metaKeyword" name="keywords" content="onetomany in ef6, onetomany relationship, configure onetomany relationship, onetomany relationship conventions, ef 6 relationship conventions,one-to-many,relationship, ef,cascade delete,fluent api, configure onetomany fluent api, entity framework,Entity Framework 6 tutorial,ef6, ef, Entity Framework Tutorial, entity framework"></meta>
    <meta name="description" content="Learn how to configure One-to-Many relationship between the two entities in Entity Framework 6 code-first approach." />
<script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.entityframeworktutorial.net/code-first/configure-one-to-many-relationship-in-code-first.aspx"},"headline":"Configure One-to-Many Relationships in EF 6","author":{"@type":"Person","name":"Ravi Karia","sameAs":["https://www.entityframeworktutorial.net/aboutme.aspx","https://www.linkedin.com/in/ravikaria"]},"dateModified":"2023-01-02T05:42:15.5217025Z","description":"Learn how to configure One-to-Many relationship between the two entities in Entity Framework 6 code-first approach."}</script>
    <link rel="canonical" href="https://www.entityframeworktutorial.net/code-first/configure-one-to-many-relationship-in-code-first.aspx" />


    
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-33844821-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-33844821-1');
</script>
    <!-- InMobi Choice. Consent Manager Tag v3.0 (for TCF 2.2) -->
<script type="text/javascript" async=true>
    (function () {
        var host = "www.themoneytizer.com";
        var element = document.createElement('script');
        var firstScript = document.getElementsByTagName('script')[0];
        var url = 'https://cmp.inmobi.com'
            .concat('/choice/', '6Fv0cGNfc_bw8', '/', host, '/choice.js?tag_version=V3');
        var uspTries = 0;
        var uspTriesLimit = 3;
        element.async = true;
        element.type = 'text/javascript';
        element.src = url;

        firstScript.parentNode.insertBefore(element, firstScript);

        function makeStub() {
            var TCF_LOCATOR_NAME = '__tcfapiLocator';
            var queue = [];
            var win = window;
            var cmpFrame;

            function addFrame() {
                var doc = win.document;
                var otherCMP = !!(win.frames[TCF_LOCATOR_NAME]);

                if (!otherCMP) {
                    if (doc.body) {
                        var iframe = doc.createElement('iframe');

                        iframe.style.cssText = 'display:none';
                        iframe.name = TCF_LOCATOR_NAME;
                        doc.body.appendChild(iframe);
                    } else {
                        setTimeout(addFrame, 5);
                    }
                }
                return !otherCMP;
            }

            function tcfAPIHandler() {
                var gdprApplies;
                var args = arguments;

                if (!args.length) {
                    return queue;
                } else if (args[0] === 'setGdprApplies') {
                    if (
                        args.length > 3 &&
                        args[2] === 2 &&
                        typeof args[3] === 'boolean'
                    ) {
                        gdprApplies = args[3];
                        if (typeof args[2] === 'function') {
                            args[2]('set', true);
                        }
                    }
                } else if (args[0] === 'ping') {
                    var retr = {
                        gdprApplies: gdprApplies,
                        cmpLoaded: false,
                        cmpStatus: 'stub'
                    };

                    if (typeof args[2] === 'function') {
                        args[2](retr);
                    }
                } else {
                    if (args[0] === 'init' && typeof args[3] === 'object') {
                        args[3] = Object.assign(args[3], { tag_version: 'V3' });
                    }
                    queue.push(args);
                }
            }

            function postMessageEventHandler(event) {
                var msgIsString = typeof event.data === 'string';
                var json = {};

                try {
                    if (msgIsString) {
                        json = JSON.parse(event.data);
                    } else {
                        json = event.data;
                    }
                } catch (ignore) { }

                var payload = json.__tcfapiCall;

                if (payload) {
                    window.__tcfapi(
                        payload.command,
                        payload.version,
                        function (retValue, success) {
                            var returnMsg = {
                                __tcfapiReturn: {
                                    returnValue: retValue,
                                    success: success,
                                    callId: payload.callId
                                }
                            };
                            if (msgIsString) {
                                returnMsg = JSON.stringify(returnMsg);
                            }
                            if (event && event.source && event.source.postMessage) {
                                event.source.postMessage(returnMsg, '*');
                            }
                        },
                        payload.parameter
                    );
                }
            }

            while (win) {
                try {
                    if (win.frames[TCF_LOCATOR_NAME]) {
                        cmpFrame = win;
                        break;
                    }
                } catch (ignore) { }

                if (win === window.top) {
                    break;
                }
                win = win.parent;
            }
            if (!cmpFrame) {
                addFrame();
                win.__tcfapi = tcfAPIHandler;
                win.addEventListener('message', postMessageEventHandler, false);
            }
        };

        makeStub();

        var uspStubFunction = function () {
            var arg = arguments;
            if (typeof window.__uspapi !== uspStubFunction) {
                setTimeout(function () {
                    if (typeof window.__uspapi !== 'undefined') {
                        window.__uspapi.apply(window.__uspapi, arg);
                    }
                }, 500);
            }
        };

        var checkIfUspIsReady = function () {
            uspTries++;
            if (window.__uspapi === uspStubFunction && uspTries < uspTriesLimit) {
                console.warn('USP is not accessible');
            } else {
                clearInterval(uspInterval);
            }
        };

        if (typeof window.__uspapi === 'undefined') {
            window.__uspapi = uspStubFunction;
            var uspInterval = setInterval(checkIfUspIsReady, 6000);
        }
    })();
</script>
<!-- End InMobi Choice. Consent Manager Tag v3.0 (for TCF 2.2) -->
</head>
<body>
    <div class="phWrapper">
        

<header class="phHeader">
    <nav class="navbar navbar-expand logo-link">
        <a class="navbar-brand text-uppercase" href="../index.html">
            <img src="../images/logo.png" class="logo-img" alt="Entity Framework Tutorial" /></a>
    </nav>
</header>

        
        <nav class="navbar navbar-expand navbar-dark special-color-dark topMenuHorizontal sticky-top">

            <!-- Navbar brand -->
            <!-- Collapse button -->
            <button class="navbar-toggler d-block d-md-none" type="button" data-toggle="collapse" data-target="#navbarLeft" aria-controls="#navbarLeft"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Collapsible content -->
            <div class="collapse navbar-collapse" id="topMenu">

                <!-- Links -->
                <ul class="navbar-nav mr-auto left">
                    <li class="nav-item">
                        <a href="../index.html" class="nav-link" style="font-size: 20px">
                            <i class="fa fa-home" aria-hidden="true"></i>
                        </a>
                    </li>

                    <li class="nav-item"><a class="nav-link" href="../what-is-entityframework.aspx.html">EF Basics</a></li>
                    <li class="nav-item"><a class="nav-link" href="../efcore/entity-framework-core.aspx.html">EF Core</a></li>
                    <li class="nav-item"><a class="nav-link" href="../entityframework6/introduction.aspx.html">EF 6 DB-First</a></li>
                    <li class="nav-item"><a class="nav-link" href="what-is-code-first.aspx.html">EF 6 Code-First </a></li>
                    <li class="nav-item"><a class="nav-link" href="../faq.aspx.html">FAQs</a></li>
                    <li class="nav-item"><a class="nav-link" href="../entity-framework-quiz.aspx.html">EF Quiz</a></li>
                    <li class="nav-item"><a class="nav-link" href="../entity-framework-cheat-sheet.aspx.html">Cheat Sheet</a></li>
                    <li class="nav-item dropdown mega-dropdown d-lg-none d-md-block">
                <a class="nav-link dropdown-toggle no-caret" id="navbarDropdownMenuLink1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a>
                <div class="dropdown-menu mega-menu v-2 row z-depth-1 special-color" aria-labelledby="navbarDropdownMenuLink1">
                    <a class="close text-white">&#10005; </a>
                    <div class="row mx-md-4 mx-1">
                        <div class="col-md-6 col-sm-6 col-xl-3 sub-menu my-xl-4 mt-4 mb-4">
                            <h6 class="sub-title text-white">Entity Framework Tutorials</h6>
                            <ul class="caret-style pl-0">
                                <li class=""><a class="menu-item" href="../efcore/entity-framework-core.aspx.html">EF Core</a></li>
                                <li class=""><a class="menu-item" href="what-is-code-first.aspx.html">EF 6 Code-First</a></li>
                                <li class=""><a class="menu-item" href="../entityframework6/introduction.aspx.html">EF 6 DB-First</a></li>
                            </ul>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xl-3 sub-menu my-xl-4  mt-4 ">
                            <h6 class="sub-title text-white">Entity Framework</h6>
                            <!--Featured image-->
                            <ul class="caret-style pl-0">
                                <li class=""><a class="menu-item" href="../entity-framework-quiz.aspx.html">EF Quiz</a></li>
                                <li class=""><a class="menu-item" href="http://www.entityframeworktutorial.net/Articles/entityframework-articles.aspx">FAQs</a></li>
                                
                                <li class=""><a class="menu-item" href="../entity-framework-cheat-sheet.aspx.html">EF Cheat Sheet</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </li>
                </ul>

                <!-- Links -->
                <ul class="navbar-nav nav-flex right ml-auto">
                    
                </ul>
                <!-- Search form -->
                <div id="wrap">
                    <form class="navbar-form" action="https://www.google.com/search" id="cse-search-box" role="search" target="_blank">
                        <div>
                            <input type="hidden" name="cx" value="partner-pub-7448309248176309:8374077199" />
                            <input type="hidden" name="ie" value="UTF-8" />
                            <input type="text" name="q" id="q" placeholder="Search" class="form-control">
                            <span class="input-group-btn">
                                <button type="submit" id="search_submit" class="button-search border-0 bg-transparent text-white">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </form>

                </div>
            </div>
        </nav>

        <nav class="navbar menuLeft p-0 navbar-expand-md">
            <div class="collapse navbar-collapse" id="navbarLeft">
                <div class="menuVerticalParent">
                    <ul class="menuVertical" id="leftmenu">
                        <li><a href="what-is-code-first.aspx.html">What is Code-First</a></li>
                        <li><a href="setup-entity-framework-code-first-environment.aspx.html">Install Entity Framework</a></li>
                        <li><a href="simple-code-first-example.aspx.html">Simple Code-First Example</a></li>
                        <li><a href="code-first-conventions.aspx.html">Code-First Conventions</a></li>
                        <li><a href="database-initialization-in-code-first.aspx.html">DB Initialization</a></li>
                        <li><a href="database-initialization-strategy-in-code-first.aspx.html">DB Initialization Strategy</a></li>
                        <li><a href="inheritance-strategy-in-code-first.aspx.html">Inheritance Strategy</a></li>
                        <li><a href="configure-classes-in-code-first.aspx.html">Configure Domain Classes</a></li>
                        <li><a href="dataannotation-in-code-first.aspx.html">Data Annotations Attributes</a></li>
                        <li>
                            <ul>
                                <li><a href="table-dataannotations-attribute-in-code-first.aspx.html">Table</a></li>
                                <li><a href="column-dataannotations-attribute-in-code-first.aspx.html">Column</a></li>
                                <li><a href="key-dataannotations-attribute-in-code-first.aspx.html">Key</a></li>
                                <li><a href="notmapped-dataannotations-attribute-in-code-first.aspx.html">NotMapped</a></li>
                                <li><a href="foreignkey-dataannotations-attribute-in-code-first.aspx.html">ForeignKey</a></li>
                                <li><a href="../entityframework6/index-attribute-in-code-first.aspx.html">Index</a></li>
                                <li><a href="inverseproperty-dataannotations-attribute-in-code-first.aspx.html">InverseProperty</a></li>
                                <li><a href="required-attribute-dataannotations-in-code-first.aspx.html">Required</a></li>
                                <li><a href="maxlength-minlength-dataannotations-attribute-in-code-first.aspx.html">MaxLength</a></li>
                                <li><a href="stringlength-dataannotations-attribute-in-code-first.aspx.html">StringLength</a></li>
                                <li><a href="TimeStamp-dataannotations-attribute-in-code-first.aspx.html">TimeStamp</a></li>
                                <li><a href="databasegenerated-dataannotations-attribute.aspx.html">DatabaseGenerated</a></li>
                                <li><a href="concurrencycheck-dataannotations-attribute-in-code-first.aspx.html">ConcurrencyCheck</a></li>
                            </ul>
                        </li>
                        <li><a href="fluent-api-in-code-first.aspx.html">Fluent API</a></li>
                        <li>
                            <ul>
                                <li><a href="configure-entity-mappings-using-fluent-api.aspx.html">Entity Mappings</a></li>
                                <li><a href="configure-property-mappings-using-fluent-api.aspx.html">Property Mappings</a></li>

                            </ul>
                        </li>
                        <li><a href="configure-one-to-one-relationship-in-code-first.aspx.html">Configure One-to-One</a></li>
                        <li><a href="configure-one-to-many-relationship-in-code-first.aspx.html">Configure One-to-Many</a></li>
                        <li><a href="configure-many-to-many-relationship-in-code-first.aspx.html">Configure Many-to-Many</a></li>
                        <li><a href="code-first-from-existing-database.aspx.html">From Existing DB</a></li>
                        <li><a href="cascade-delete-in-code-first.aspx.html">Cascade Delete</a></li>
                        <li><a href="../entityframework6/code-first-insert-update-delete-stored-procedure-mapping.aspx.html">Stored Procedure Mapping</a></li>
                        <li><a href="move-configurations-to-seperate-class-in-code-first.aspx.html">Move Configurations</a></li>
                        <li><a href="seed-database-in-code-first.aspx.html">Seed Data</a></li>
                        <li><a href="../entityframework6/custom-conventions-codefirst.aspx.html">Custom Conventions</a></li>
                        <li><a href="migration-in-code-first.aspx.html">Migration</a></li>
                        <li>
                            <ul>
                                <li><a href="automated-migration-in-code-first.aspx.html">Automated Migration</a></li>
                                <li><a href="code-based-migration-in-code-first.aspx.html">Code-based Migration</a></li>
                            </ul>
                        </li>
                        <li><a href="entity-framework-power-tools.aspx.html">EF Power Tools</a></li>
                   </ul>
                </div>
            </div>
        </nav>
        <section class="middleContent" id="middleContent">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 pr-md-0 col-lg-12 col-xl-8">
                        
<div class="lb-ad mt-1">
    
    <a href="https://entityframework-extensions.net?z=eft" target="_blank" rel="nofollow" >
        <img src="http://www.entityframeworktutorial.net/images/ef-ext-lb.jpg" class="eftext-img" /></a>
</div>

                        
<div class="navigation ">
    <div class="row">
        <div class="col-6  text-left mb-2 mb-sm-0" id="divPrev1">
            <a id="ctl00_eftNextPrevious_lnkPrev1" class="btn  rounded-0" href="configure-one-to-one-relationship-in-code-first.aspx.html"><i class="fa fa-angle-left mr-1"></i> Previous</a>
        </div>
        <div class="col-6 text-right float-right" id="divNext1">
            <a id="ctl00_eftNextPrevious_lnkNext1" class="btn rounded-0" href="configure-many-to-many-relationship-in-code-first.aspx.html">Next <i class="fa fa-angle-right ml-1"></i></a>
        </div>
    </div>
</div>


                        

    <h1>Configure One-to-Many Relationships in EF 6</h1>

    <p>
        Here, we will learn how to configure One-to-Many relationships between two entities (domain classes) in Entity Framework 6.x using the code-first approach.
    </p>

    <p>
        Let's configure a one-to-many relationship between the following <code>Student</code> and <code>Grade</code> entities where there can be many students in one grade.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> StudentId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> StudentName { get; set; }
}
       
<span class="kwrd">public</span> <span class="kwrd">class</span> Grade
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Section { get; set; }
}
</code>
</pre>
    <p>
        After implementing the one-to-many relationship in the above entities, the database tables for <code>Student</code> and <code>Grade</code> will look like below.
    </p>

    <figure class="thumbnail center-block">
        <a href="../images/codefirst/onetomany-db.PNG" target="_blank">
            <img src="../images/codefirst/onetomany-db.PNG" alt="one-to-one relationship in code first" /></a>
    </figure>

    <p>
        The one-to-many relationship can be configured in the following ways.
    </p>

    <ol>
        <li><a href="configure-one-to-many-relationship-in-code-first.aspx.html#conventions-for-one-to-many-ef6" target="_blank">By following Conventions</a>
        </li>
        <li><a href="configure-one-to-many-relationship-in-code-first.aspx.html#configure-one-to-many-using-fluent-api" target="_blank">By using Fluent API Configurations</a>
        </li>
    </ol>

    <h2 id="conventions-for-one-to-many-ef6">Conventions for One-to-Many Relationships</h2>

    <p>
        There are certain conventions in Entity Framework which if followed in entity classes (domain classes) will automatically result in a one-to-many relationship between two tables in the database. You don't need to configure anything else.
    </p>

    <p>
        Let's look at an example of all the conventions which create a one-to-many relationship.
    </p>

    <h3>Convention 1</h3>

    <p>
        We want to establish a one-to-many relationship between the <code>Student</code> and <code>Grade</code> entities where many students are associated with one <code>Grade</code>. It means that each <code>Student</code> entity points to a <code>Grade</code>. 
        This can be achieved by including a reference navigation property of type <code>Grade</code> in the <code>Student</code> entity class, as shown below.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> Id { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Name { get; set; }
    <b><span class="kwrd">public</span> Grade Grade { get; set; }</b>
}

<span class="kwrd">public</span> <span class="kwrd">class</span> Grade
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Section { get; set; }
}
</code>
</pre>
    <p>
        In the above example, the <code>Student</code> class includes a reference navigation property of <code>Grade</code> class. So, there can be many students in a single grade. This will result in a one-to-many relationship between the <code>Students</code> and <code>Grades</code> table in the database,
        where the <code>Students</code> table includes foreign key <code>Grade_GradeId</code> as shown below.
    </p>

    <figure class="thumbnail center-block">
        <a href="../images/codefirst/onetomany-1.PNG" target="_blank">
            <img src="../images/codefirst/onetomany-1.PNG" alt="one-to-one relationship in code first" /></a>
    </figure>

    <p>
        Notice that the reference property is nullable, so it creates a nullable foreign key column <code>Grade_GradeId</code> in the <code>Students</code> table. You can <a href="configure-one-to-many-relationship-in-code-first.aspx.html#notnull-foreignkey-using-fluent-api" >configure NotNull foreign key using fluent API</a>.
    </p>


    <h3>Convention 2</h3>

    <p>
        Another convention is to include a collection navigation property in the principal entity as shown below.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> StudentId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> StudentName { get; set; }
}

<span class="kwrd">public</span> <span class="kwrd">class</span> Grade
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Section { get; set; }

    <b><span class="kwrd">public</span> ICollection&lt;Student&gt; Students { get; set; } </b>
}
</code>
</pre>
    <p>
        In the above example, the <code>Grade</code> entity includes a collection navigation property of type <code>ICollection&lt;Student&gt;</code>. 
        This also results in a one-to-many relationship between the <code>Student</code> and <code>Grade</code> entities. This example produces the same result in the database as convention 1.
    </p>
    
<div class="inart-ad">
   
    
</div>

    <h3>Convention 3</h3>

    <p>
        Including navigation properties at both ends will also result in a one-to-many relationship, as shown below. 
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> Id { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Name { get; set; }
    <b><span class="kwrd">public</span> Grade Grade { get; set; }</b>
}

<span class="kwrd">public</span> <span class="kwrd">class</span> Grade
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeID { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Section { get; set; }
    
    <b><span class="kwrd">public</span> ICollection&lt;Student&gt; Student { get; set; }</b>
}
</code>
</pre>
    <p>
        In the above example, the <code>Student</code> entity includes a reference navigation property of the <code>Grade</code> type and the <code>Grade</code> entity class includes a collection navigation property of the <code>ICollection&lt;Student&gt;</code> type which results in a one-to-many relationship. This example produces the same result in the database as convention 1.
    </p>

    <h3>Convention 4</h3>

    <p>
        A fully defined relationship at both ends will create a one-to-many relationship, as shown below.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> Id { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Name { get; set; }
    <b>
    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> Grade Grade { get; set; }</b>
}

<span class="kwrd">public</span> <span class="kwrd">class</span> Grade
{

    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }
    <b>
    <span class="kwrd">public</span> ICollection&lt;Student&gt; Student { get; set; }</b>
}
</code>
</pre>
    <p>
        In the above example, the <code>Student</code> entity includes foreign key property <code>GradeId</code> with its reference property <code>Grade</code>. 
        This will create a one-to-many relationship with the NotNull foreign key column in the <code>Students</code> table, as shown below.
    </p>

    <figure class="thumbnail center-block">
        <a href="../images/codefirst/onetomany-2.PNG" target="_blank">
            <img src="../images/codefirst/onetomany-2.PNG" alt="one-to-one relationship in code first" /></a>
    </figure>
    <p>
        If the data type of <code>GradeId</code> is nullable integer, then it will create a null foreign key.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> Id { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Name { get; set; }

    <span class="kwrd">public</span> <span class="kwrd">int</span>? GradeId { get; set; }
    <span class="kwrd">public</span> Grade Grade { get; set; }
}
</code>
</pre>
    <p>
        The above code snippet will create a nullable <code>GradeId</code> column in the database because we have used <code>Nullable&lt;int&gt;</code> type (<code>?</code> is a shortcut for <code>Nullable&lt;int&gt;</code>)
    </p>

    <h2 id="configure-one-to-many-using-fluent-api">Configure a One-to-Many Relationship using Fluent API </h2>
    <p>
        Generally, you don't need to configure the one-to-many relationship in entity framework because one-to-many relationship conventions cover all combinations. 
        However, you may configure relationships using Fluent API at one place to make it more maintainable.
    </p>
    <p>
        Consider the following <code>Student</code> and <code>Grade</code> entity classes.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> Student
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> Id { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Name { get; set; }

    <span class="kwrd">public</span> <span class="kwrd">int</span> CurrentGradeId { get; set; }
    <span class="kwrd">public</span> Grade CurrentGrade { get; set; }
}

<span class="kwrd">public</span> <span class="kwrd">class</span> Grade
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> Section { get; set; }

    <span class="kwrd">public</span> ICollection&lt;Student&gt; Students { get; set; }
}
</code>
</pre>
    <p>
        You can configure a one-to-many relationship for the above entities using Fluent API by overriding the <code>OnModelCreating</code> method in the context class, as shown below.
    </p>

    <pre class="csharpcode">
<code>
<span class="kwrd">public</span> <span class="kwrd">class</span> SchoolContext : DbContext
{
    <span class="kwrd">public</span> DbSet&lt;Student&gt; Students { get; set; }
    <span class="kwrd">public</span> DbSet&lt;Grade&gt; Grades { get; set; }

    <span class="kwrd">protected</span> <span class="kwrd">override</span> <span class="kwrd">void</span> OnModelCreating(DbModelBuilder modelBuilder)
    {
        <span class="rem">// configures one-to-many relationship</span>
        modelBuilder.Entity&lt;Student&gt;()
            .HasRequired&lt;Grade&gt;(s =&gt; s.CurrentGrade)
            .WithMany(g =&gt; g.Students)
            .HasForeignKey&lt;<span class="kwrd">int</span>&gt;(s =&gt; s.CurrentGradeId);          
    }
}
</code>
</pre>
    <p>
        Let's understand the above code step by step.
    </p>
    <ul class="list">
        <li>First, we need to start configuring with any one entity class. So, <code>modelBuilder.Entity&lt;student&gt;()</code> starts with the <code>Student</code> entity.
        </li>

        <li>Then, <code>.HasRequired&lt;Grade&gt;(s => s.CurrentGrade)</code> specifies that the <code>Student</code> entity has required the <code>CurrentGrade</code> property. 
        This will create a NotNull foreign key column in the DB.
        </li>

        <li>Now, it's time to configure the other end of the relationship - the <code>Grade</code> entity.
        </li>

        <li>
            <code>.WithMany(g => g.Students)</code>
            specifies that the <code>Grade</code> entity class includes many <code>Student</code> entities. Here, many infers the <code>ICollection</code> type property.
        </li>

        <li>Now, if the <code>Student</code> entity does not follow the Id property convention for foreign key, then we can specify the name of the foreign key using the <code>HasForeignKey</code> method.
        </li>

        <li>
            <code>.HasForeignKey&lt;int&gt;(s => s.CurrentGradeId);</code>
            specifies the foreign key property in the <code>Student</code> entity.
        </li>
    </ul>
    <p>
        Alternatively, you can start configuring the relationship with the <code>Grade</code> entity instead of the <code>Student</code> entity. The following code produces the same result as above.
    </p>

    <pre class="csharpcode">
<code>
modelBuilder.Entity&lt;Grade&gt;()
    .HasMany&lt;Student&gt;(g =&gt; g.Students)
    .WithRequired(s =&gt; s.CurrentGrade)
    .HasForeignKey&lt;<span class="kwrd">int</span>&gt;(s =&gt; s.CurrentGradeId);
</code>
</pre>
    <p>
        The above example will create the following tables in the database.
    </p>

    <figure class="thumbnail center-block">
        <a href="../images/codefirst/onetomany-4.PNG" target="_blank">
            <img src="../images/codefirst/onetomany-4.PNG" alt="one-to-one relationship in code first" /></a>
    </figure>
    
    <h3 id="notnull-foreignkey-using-fluent-api">Configure the NotNull ForeignKey using Fluent API</h3>
     
    <p>
        In convention 1, we have seen that it creates an optional one-to-many relationship which in turn creates a nullable foreign key column in the database. 
        To make it a NotNull column, use the <code>HasRequired()</code> method as shown below.
    </p>

    <pre class="csharpcode">
<code>
modelBuilder.Entity&lt;Student&gt;()
    .HasRequired&lt;Grade&gt;(s =&gt; s.CurrentGrade)
    .WithMany(g =&gt; g.Students);
</code>
</pre>

    <h3 id="configure-cascade-delete-using-fluent-api-in-one-to-many-relationship">Configure Cascade Delete using Fluent API</h3>

    <p>
        Cascade delete means automatically deleting child rows when the related parent row is deleted. For example, if <code>Grade</code> is deleted then all the students in that <code>Grade</code> should also be deleted automatically.
        The following code configures the cascade delete using the <code>WillCascadeOnDelete</code> method.
    </p>

    <pre class="csharpcode">
<code>
modelBuilder.Entity&lt;Grade&gt;()
    .HasMany&lt;Student&gt;(g =&gt; g.Students)
    .WithRequired(s =&gt; s.CurrentGrade)
    .WillCascadeOnDelete();
</code>
</pre>



                        <div>
                            <hr />
                            <a href="https://github.com/entityframeworktutorial/EF6-Code-First-Demo" target="_blank"><i class="fa fa-download" aria-hidden="true"></i> &nbsp;Download EF 6 Code-First Demo Project from Github</a>
                        </div>
                        
<div class="row">
    <hr />
    
    
    <div class="col-xl-12 text-center">
       <div id="124859-19"><script src="http://ads.themoneytizer.com/s/gen.js?type=19"></script><script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=19"></script></div>
    </div>

</div>

                        
<div class="navigation ">
    <div class="row">
        <div class="col-6  text-left mb-2 mb-sm-0" id="divPrev1">
            <a id="ctl00_eftNextPrevious1_lnkPrev1" class="btn  rounded-0" href="configure-one-to-one-relationship-in-code-first.aspx.html"><i class="fa fa-angle-left mr-1"></i> Previous</a>
        </div>
        <div class="col-6 text-right float-right" id="divNext1">
            <a id="ctl00_eftNextPrevious1_lnkNext1" class="btn rounded-0" href="configure-many-to-many-relationship-in-code-first.aspx.html">Next <i class="fa fa-angle-right ml-1"></i></a>
        </div>
    </div>
</div>

                        
                    </div>
                    
                    
<div class=" d-none d-xl-block col-xl-4 rightSidebar">
    <div class="row">
        <div class="col-12">
            <div class="popular-articles col-12">
                <ul class="list-group article-items one">
                    
                    <li class="list-group-item intro"><a href="https://entityframework-extensions.net/fastest-way-to-insert?z=eft-tl" onclick="_gaq.push(['_trackEvent', 'ef_ext_tl', 'click', 'LINK CLICK', 1, true]);" target="_blank" rel="nofollow  noreferrer" title="Improve EF performance using Entity Framework Extension">Fastest Way to Insert using EF Extensions</a></li>
                    <li class="list-group-item intro"><a href="https://www.tutorialsteacher.com" target="_blank" title="C#, ASP.NET MVC, LINQ, TypeScript, Node.js, TypeScirpt">Learn C#, MVC, ASP.NET Core, LINQ</a></li>

                </ul>
            </div>

            
            <div class="mt-3 ml-2">
                <div id="124859-2">
                    <script src="http://ads.themoneytizer.com/s/gen.js?type=2"></script>
                    <script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=2"></script>
                </div>
            </div>
            
            
            
            
            
            <div class="mt-3 ml-2" id="stickyAdDiv">
                <div id="124859-3"><script src="http://ads.themoneytizer.com/s/gen.js?type=3"></script><script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=3"></script></div>
            </div>
        </div>


    </div>
</div>

                </div>
            </div>
            
<footer class="section footer pt-5">
    <div class="footer-main">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-7">
                    <div class="row">
                        <div class="col-md-5 ">
                            <div class="edugate-widget widget">
                                <div class="title-widget">EntityFrameworkTutorial</div>
                                <div class="content-widget">
                                    <p>
                                        Learn Entity Framework using simple yet practical examples on EntityFrameworkTutorial.net for free.
                                        Learn Entity Framework DB-First, Code-First and EF Core step by step.
                                        While using this site, you agree to have read and accepted our terms
                                        of use and <a href="../privacy-policy.aspx.html" class="privacypolicy">privacy policy</a>.
                                    </p>
                                    <div class="info-list">
                                        <ul class="list-unstyled">
                                            <li><i class="fa fa-envelope-o"></i><a class="mail" href="../cdn-cgi/l/email-protection.html#690f0c0c0d0b080a02290c071d001d100f1b08040c1e061b021d1c1d061b00080547070c1d"><span class="__cf_email__" data-cfemail="1c7a7979787e7d7f775c7972687568657a6e7d71796b736e77686968736e757d7032727968">[email&#160;protected]</span></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="useful-link-widget widget">
                                <div class="title-widget">Tutorials</div>
                                <div class="content-widget">
                                    <div class="useful-link-list">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-6">
                                                <ul class="list-unstyled">
                                                    <li><i class="fa fa-angle-right"></i><a href="../basics/what-is-entity-in-entityframework.aspx.html">EF Basics</a></li>
                                                    <li><i class="fa fa-angle-right"></i><a href="../efcore/entity-framework-core.aspx.html">EF Core</a></li>
                                                </ul>
                                            </div>
                                            <div class="col-md-6 col-sm-6 ">
                                                <ul class="list-unstyled">
                                                    <li><i class="fa fa-angle-right"></i><a href="../entityframework6/introduction.aspx.html">EF 6 DB-First</a></li>
                                                    <li><i class="fa fa-angle-right"></i><a href="what-is-code-first.aspx.html">EF 6 Code-First</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="row">
                        <div class="col-md-12 ">
                            <div class="mailing-widget widget">
                                <div class="title-widget">E-mail list</div>
                                <div class="content-wiget">
                                    <p>
                                        Subscribe to EntityFrameworkTutorial email list and get EF 6 and EF Core Cheat Sheets, latest updates, tips &amp;
                                        tricks about Entity Framework to your inbox.
                                    </p>
                                    <form action="http://entityframeworktutorial.us13.list-manage.com/subscribe/post-json?u=659e2cbd2829799e7dc94ae35&amp;id=93dae2ea03" method="post" id="subscribe-form" name="subscribe-form" class="validate" novalidate>
                                        <div class="input-group">
                                            <input type="text" placeholder="Email address" class="form-control form-email-widget" name="MERGE0" id="MERGE0" size="25" /><span class="input-group-btn"><input type="submit" value="Go" name="subscribe" id="mc-embedded-subscribe" class="btn btn-email" /></span>
                                        </div>

                                        <div id="mce-responses" class="clear">
                                            <div class="response" id="mce-error-response" style="display: none"></div>
                                            <div class="response" id="mce-success-response" style="display: none"></div>
                                        </div>
                                        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                        <div style="position: absolute; left: -5000px;" aria-hidden="true">
                                            <input type="text" name="b_659e2cbd2829799e7dc94ae35_93dae2ea03" tabindex="-1" value="" />
                                        </div>
                                        <div class="alert-success" id="successMsg"></div>
                                        <div class="alert-danger" id="failMsg"></div>

                                    </form>
                                    <p>We respect your privacy.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row hyperlink text-center text-md-left">
                <div class="col-md-6 hyper-left">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="../aboutme.aspx.html">ABOUT ME</a></li>
                        <li class="list-inline-item"><a href="../privacy-policy.aspx.html">PRIVACY POLICY</a></li>
                        <li class="list-inline-item"><a href="../terms-of-use.aspx.html">TERMS OF USE</a></li>
                    </ul>
                </div>
                <div class="col-md-6 hyper-right text-center text-md-right">
                    <i class="fa fa-copyright" aria-hidden="true"></i> 2023 EntityFrameworkTutorial.net. All Rights Reserved.
                </div>
            </div>
        </div>
    </div>
    
</footer>
   <div id="124859-6"><script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="http://ads.themoneytizer.com/s/gen.js?type=6"></script><script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=6"></script></div>

        </section>
    </div>
    <script src="../scripts/jquery.min.js"></script>
    
    <script src="../scripts/popper.1.12.9.min.js"></script>
    <script src="../App_Themes/bs/bootstrap.min.js"></script>
    <script src="http://www.entityframeworktutorial.net/scripts/eftGeneralScript.min.js?v=1.3"></script>
    <script type="text/javascript" src="http://cdn.pubguru.com/fb.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            stickTLMenus();
                stickyAd();
            var temp = $(window).height();

            $('#back-top a').addClass('d-none');
            $(window).scroll(function () {
                stickTLMenus();
                stickyAd();

                if ($(window).scrollTop() > temp) {
                    $('#back-top a').addClass('d-block');
                    $('#back-top a').removeClass('d-none');
                }
                else {
                    $('#back-top a').addClass('d-none');
                    $('#back-top a').removeClass('d-block');
                }
            });
            var path = $(location).attr('pathname');
            $('#leftmenu li a[href="' + path + '"]').addClass('active');
            $('#topMenu ul li a[href="/code-first/what-is-code-first.aspx"]').addClass('active');
            
            maintainLeftMenuPos();
            $("#subscribe-form").on("submit", function (s) { s.preventDefault(), submitSubscribeForm($("#subscribe-form")) })
        });
    </script>
</body>
</html>
