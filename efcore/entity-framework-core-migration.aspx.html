


<!DOCTYPE html>

<html>
<head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=EDGE;chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>
	Migrations in Entity Framework Core
</title><link href="../App_Themes/bs/bootstrap.min.css" rel="stylesheet" /><link href="http://www.entityframeworktutorial.net/App_Themes/css/eftstyle.min.css?v=1.9" rel="stylesheet" type="text/css" />
    

    <!--[if lt IE 9]>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <meta id="ctl00_head_metaKeyword" name="keywords" content="what is migration in ef core,migration efcore, ef core migrations, ef core migrations command, commands, ef core commands, ef core migrations command, entity framework,Entity Framework core tutorial,efcore Tutorial,ef, ef core, entity framework"></meta>
    <meta name="description" content="Learn about migrations in EF Core. Learn how to add migration, update database and generate script." />
<script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.entityframeworktutorial.net/efcore/entity-framework-core-migration.aspx"},"headline":"Migrations in Entity Framework Core","author":{"@type":"Person","name":"Ravi Karia","sameAs":["https://www.entityframeworktutorial.net/aboutme.aspx","https://www.linkedin.com/in/ravikaria"]},"dateModified":"2023-09-22T13:08:29.7973524Z","description":"Learn about migrations in EF Core. Learn how to add migration, update database and generate script."}</script>
    <link rel="canonical" href="https://www.entityframeworktutorial.net/efcore/entity-framework-core-migration.aspx" />

    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-33844821-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-33844821-1');
    </script>
    <!-- InMobi Choice. Consent Manager Tag v3.0 (for TCF 2.2) -->
<script type="text/javascript" async=true>
    (function () {
        var host = "www.themoneytizer.com";
        var element = document.createElement('script');
        var firstScript = document.getElementsByTagName('script')[0];
        var url = 'https://cmp.inmobi.com'
            .concat('/choice/', '6Fv0cGNfc_bw8', '/', host, '/choice.js?tag_version=V3');
        var uspTries = 0;
        var uspTriesLimit = 3;
        element.async = true;
        element.type = 'text/javascript';
        element.src = url;

        firstScript.parentNode.insertBefore(element, firstScript);

        function makeStub() {
            var TCF_LOCATOR_NAME = '__tcfapiLocator';
            var queue = [];
            var win = window;
            var cmpFrame;

            function addFrame() {
                var doc = win.document;
                var otherCMP = !!(win.frames[TCF_LOCATOR_NAME]);

                if (!otherCMP) {
                    if (doc.body) {
                        var iframe = doc.createElement('iframe');

                        iframe.style.cssText = 'display:none';
                        iframe.name = TCF_LOCATOR_NAME;
                        doc.body.appendChild(iframe);
                    } else {
                        setTimeout(addFrame, 5);
                    }
                }
                return !otherCMP;
            }

            function tcfAPIHandler() {
                var gdprApplies;
                var args = arguments;

                if (!args.length) {
                    return queue;
                } else if (args[0] === 'setGdprApplies') {
                    if (
                        args.length > 3 &&
                        args[2] === 2 &&
                        typeof args[3] === 'boolean'
                    ) {
                        gdprApplies = args[3];
                        if (typeof args[2] === 'function') {
                            args[2]('set', true);
                        }
                    }
                } else if (args[0] === 'ping') {
                    var retr = {
                        gdprApplies: gdprApplies,
                        cmpLoaded: false,
                        cmpStatus: 'stub'
                    };

                    if (typeof args[2] === 'function') {
                        args[2](retr);
                    }
                } else {
                    if (args[0] === 'init' && typeof args[3] === 'object') {
                        args[3] = Object.assign(args[3], { tag_version: 'V3' });
                    }
                    queue.push(args);
                }
            }

            function postMessageEventHandler(event) {
                var msgIsString = typeof event.data === 'string';
                var json = {};

                try {
                    if (msgIsString) {
                        json = JSON.parse(event.data);
                    } else {
                        json = event.data;
                    }
                } catch (ignore) { }

                var payload = json.__tcfapiCall;

                if (payload) {
                    window.__tcfapi(
                        payload.command,
                        payload.version,
                        function (retValue, success) {
                            var returnMsg = {
                                __tcfapiReturn: {
                                    returnValue: retValue,
                                    success: success,
                                    callId: payload.callId
                                }
                            };
                            if (msgIsString) {
                                returnMsg = JSON.stringify(returnMsg);
                            }
                            if (event && event.source && event.source.postMessage) {
                                event.source.postMessage(returnMsg, '*');
                            }
                        },
                        payload.parameter
                    );
                }
            }

            while (win) {
                try {
                    if (win.frames[TCF_LOCATOR_NAME]) {
                        cmpFrame = win;
                        break;
                    }
                } catch (ignore) { }

                if (win === window.top) {
                    break;
                }
                win = win.parent;
            }
            if (!cmpFrame) {
                addFrame();
                win.__tcfapi = tcfAPIHandler;
                win.addEventListener('message', postMessageEventHandler, false);
            }
        };

        makeStub();

        var uspStubFunction = function () {
            var arg = arguments;
            if (typeof window.__uspapi !== uspStubFunction) {
                setTimeout(function () {
                    if (typeof window.__uspapi !== 'undefined') {
                        window.__uspapi.apply(window.__uspapi, arg);
                    }
                }, 500);
            }
        };

        var checkIfUspIsReady = function () {
            uspTries++;
            if (window.__uspapi === uspStubFunction && uspTries < uspTriesLimit) {
                console.warn('USP is not accessible');
            } else {
                clearInterval(uspInterval);
            }
        };

        if (typeof window.__uspapi === 'undefined') {
            window.__uspapi = uspStubFunction;
            var uspInterval = setInterval(checkIfUspIsReady, 6000);
        }
    })();
</script>
<!-- End InMobi Choice. Consent Manager Tag v3.0 (for TCF 2.2) -->
</head>
<body>

    <div class="phWrapper">
        

<header class="phHeader">
    <nav class="navbar navbar-expand logo-link">
        <a class="navbar-brand text-uppercase" href="../index.html">
            <img src="../images/logo.png" class="logo-img" alt="Entity Framework Tutorial" /></a>
    </nav>
</header>

        
        <nav class="navbar navbar-expand navbar-dark special-color-dark topMenuHorizontal sticky-top">

            <!-- Navbar brand -->
            <!-- Collapse button -->
            <button class="navbar-toggler d-block d-md-none" type="button" data-toggle="collapse" data-target="#navbarLeft" aria-controls="#navbarLeft"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Collapsible content -->
            <div class="collapse navbar-collapse" id="topMenu">

                <!-- Links -->
                <ul class="navbar-nav mr-auto left">
                    <li class="nav-item">
                        <a href="../index.html" class="nav-link" style="font-size: 20px">
                            <i class="fa fa-home" aria-hidden="true"></i>
                        </a>
                    </li>

                    <li class="nav-item"><a class="nav-link" href="../what-is-entityframework.aspx.html">EF Basics</a></li>
                    <li class="nav-item"><a class="nav-link" href="entity-framework-core.aspx.html">EF Core</a></li>
                    <li class="nav-item"><a class="nav-link" href="../entityframework6/introduction.aspx.html">EF 6 DB-First</a></li>
                    <li class="nav-item"><a class="nav-link" href="../code-first/what-is-code-first.aspx.html">EF 6 Code-First </a></li>
                    <li class="nav-item"><a class="nav-link" href="../faq.aspx.html">FAQs</a></li>
                    <li class="nav-item"><a class="nav-link" href="../entity-framework-quiz.aspx.html">EF Quiz</a></li>
                    <li class="nav-item"><a class="nav-link" href="../entity-framework-cheat-sheet.aspx.html">Cheat Sheet</a></li>
                    <li class="nav-item dropdown mega-dropdown d-lg-none d-md-block">
                <a class="nav-link dropdown-toggle no-caret" id="navbarDropdownMenuLink1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a>
                <div class="dropdown-menu mega-menu v-2 row z-depth-1 special-color" aria-labelledby="navbarDropdownMenuLink1">
                    <a class="close text-white">&#10005; </a>
                    <div class="row mx-md-4 mx-1">
                        <div class="col-md-6 col-sm-6 col-xl-3 sub-menu my-xl-4 mt-4 mb-4">
                            <h6 class="sub-title text-white">Entity Framework Tutorials</h6>
                            <ul class="caret-style pl-0">
                                <li class=""><a class="menu-item" href="entity-framework-core.aspx.html">EF Core</a></li>
                                <li class=""><a class="menu-item" href="../code-first/what-is-code-first.aspx.html">EF 6 Code-First</a></li>
                                <li class=""><a class="menu-item" href="../entityframework6/introduction.aspx.html">EF 6 DB-First</a></li>
                            </ul>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xl-3 sub-menu my-xl-4  mt-4 ">
                            <h6 class="sub-title text-white">Entity Framework</h6>
                            <!--Featured image-->
                            <ul class="caret-style pl-0">
                                <li class=""><a class="menu-item" href="../entity-framework-quiz.aspx.html">EF Quiz</a></li>
                                <li class=""><a class="menu-item" href="http://www.entityframeworktutorial.net/Articles/entityframework-articles.aspx">FAQs</a></li>
                                
                                <li class=""><a class="menu-item" href="../entity-framework-cheat-sheet.aspx.html">EF Cheat Sheet</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </li>
                </ul>

                <!-- Links -->
                <ul class="navbar-nav nav-flex right ml-auto">
                    
                </ul>
                <!-- Search form -->
                <div id="wrap">
                    <form class="navbar-form" action="https://www.google.com/search" id="cse-search-box" role="search" target="_blank">
                        <div>
                            <input type="hidden" name="cx" value="partner-pub-7448309248176309:8374077199" />
                            <input type="hidden" name="ie" value="UTF-8" />
                            <input type="text" name="q" id="q" placeholder="Search" class="form-control">
                            <span class="input-group-btn">
                                <button type="submit" id="search_submit" class="button-search border-0 bg-transparent text-white">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </form>

                </div>
            </div>
        </nav>

        
        <nav class="navbar menuLeft p-0 navbar-expand-md">
            <div class="collapse navbar-collapse" id="navbarLeft">
                <div class="menuVerticalParent">
                    <ul class="menuVertical" id="leftmenu">
                        <li><a href="entity-framework-core.aspx.html">EF Core - Introduction</a></li>
                        <li><a href="install-entity-framework-core.aspx.html">EF Core - Installation</a></li>
                        <li><a href="create-entities.aspx.html">EF Core - Create Entities</a></li>
                        <li><a href="entity-framework-core-dbcontext.aspx.html">EF Core - Create DbContext</a></li>
                        <li>
                            <ul>
                                <li><a href="entity-framework-core-console-application.aspx.html">Working with DbContext</a></li>
                                <li><a href="changetracker-in-ef-core.aspx.html">Track Changes of Entities</a></li>
                                <li><a href="db-connection-strings.aspx.html">DB Connection Strings</a></li>
                            </ul>
                        </li>
                        <li><a href="entity-framework-core-migration.aspx.html">EF Core - Migrations</a></li>
                        <li>
                            <ul>
                                <li><a href="generate-sql-script.aspx.html">Generate SQL Script</a></li>
                                <li><a href="pmc-commands-for-ef-core-migration.aspx.html">PMC/PowerShell Commands</a></li>
                                <li><a href="cli-commands-for-ef-core-migration.aspx.html">.NET Core CLI Commands</a></li>
                            </ul>
                        </li>
                        <li><a href="saving-data-in-connected-scenario-in-ef-core.aspx.html">EF Core - Saving Data</a></li>
                        <li><a href="querying-in-ef-core.aspx.html">EF Core - Querying</a></li>
                        <li><a href="saving-data-in-disconnected-scenario-in-ef-core.aspx.html">Disconnected Scenario: Insert Data</a></li>
                        <li>
                            <ul>
                                <li><a href="update-data-in-entity-framework-core.aspx.html">Update Data</a></li>
                                <li><a href="delete-data-in-entity-framework-core.aspx.html">Delete Data</a></li>
                            </ul>
                        </li>


                        <li><a href="conventions-in-ef-core.aspx.html">EF Core - Conventions</a></li>
                        <li>
                            <ul>
                                <li><a href="one-to-many-conventions-entity-framework-core.aspx.html">One-to-Many Conventions</a></li>
                                <li><a href="one-to-one-conventions-entity-framework-core.aspx.html">One-to-One Conventions</a></li>
                            </ul>
                        </li>
                        <li><a href="configuration-in-entity-framework-core.aspx.html">EF Core - Configurations</a></li>
                        <li><a href="fluent-api-in-entity-framework-core.aspx.html">EF Core - Fluent API</a>

                        </li>
                        <li>
                            <ul>
                                <li><a href="configure-one-to-many-relationship-using-fluent-api-in-ef-core.aspx.html">Configure One-to-Many Relationship</a></li>
                                <li><a href="configure-one-to-one-relationship-using-fluent-api-in-ef-core.aspx.html">Configure One-to-One Relationship</a></li>
                                <li><a href="configure-many-to-many-relationship-in-ef-core.aspx.html">Configure Many-to-Many Relationship</a></li>

                            </ul>
                        </li>

                        <li><a href="shadow-property.aspx.html">Shadow Property</a></li>
                        <li><a href="working-with-disconnected-entity-graph-ef-core.aspx.html">Working with Disconnected Entity Graph</a></li>
                        <li><a href="changetracker-trackgraph-ef-core.aspx.html">Tracking Entity Graph</a></li>
                        <li><a href="raw-sql-queries-in-ef-core.aspx.html">Raw SQL Queries</a></li>
                        <li><a href="working-with-stored-procedure-in-ef-core.aspx.html">Working with Stored Procedure</a></li>
                        <li><a href="logging-in-entityframework-core.aspx.html">Logging</a></li>

                        <li><a href="create-model-for-existing-database-in-ef-core.aspx.html">EF Core - Existing Database</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <section class="middleContent" id="middleContent">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 pr-md-0 col-lg-12 col-xl-8">
                        
<div class="lb-ad mt-1">
    
    <a href="https://entityframework-extensions.net?z=eft" target="_blank" rel="nofollow" >
        <img src="http://www.entityframeworktutorial.net/images/ef-ext-lb.jpg" class="eftext-img" /></a>
</div>


                        
<div class="navigation ">
    <div class="row">
        <div class="col-6  text-left mb-2 mb-sm-0" id="divPrev1">
            <a id="ctl00_eftNextPrevious_lnkPrev1" class="btn  rounded-0" href="db-connection-strings.aspx.html"><i class="fa fa-angle-left mr-1"></i> Previous</a>
        </div>
        <div class="col-6 text-right float-right" id="divNext1">
            <a id="ctl00_eftNextPrevious_lnkNext1" class="btn rounded-0" href="generate-sql-script.aspx.html">Next <i class="fa fa-angle-right ml-1"></i></a>
        </div>
    </div>
</div>


                        
    <h1>Migrations in Entity Framework Core</h1>

    <p>
        Migration is a way to keep the database schema in sync with the EF Core model by preserving data.
    </p>

    <figure class="thumbnail center-block">
        <a href="../images/efcore/ef-core-migration.png" target="_blank">
            <img alt="EF Core Migration" src="../images/efcore/ef-core-migration.png" /></a>
    </figure>
    <p>
        As per the above figure, EF Core API builds the EF Core model from the entity classes, Data Annotations attributes applied on entity classes and Fluent API configurations in the <code>DbContext</code> class. EF Core migrations API will create or update the database schema based on the EF Core model. Whenever you change the domain classes, you need to run migration commands to keep the database schema up to date.
    </p>

    <p>
        EF Core migrations are a set of commands which you can execute in Package Manager Console or PowerShell or in .NET Core CLI (Command Line Interface).
    </p>

    
<div class="inart-ad">
   
    
</div>


    <h2>Adding a Migration</h2>
    <p>
        In the <a href="entity-framework-core-console-application.aspx.html">Working with DbContext</a> chapter, we used the <code>context.Database.EnsureCreated()</code> method to create the database and schema for the first time.
    Note that it creates a database first time only. It cannot change the DB schema after that. For the devlopement projects, we must use EF Core Migrations API.
    </p>
    <p>To use EF Core Migrations API, we need to install the NuGet package <code>Microsoft.EntityFrameworkCore.Tools</code>. We use EF Core 7.0.11, so install the same version of package.</p>
    <p>The following is our .NET 7 console project along with entities and a context (SchoolDbContext) class.</p>
    <figure>
        <a href="../Images/efcore/efproject1.png" target="_blank">
            <img alt="" src="../Images/efcore/efproject1.png" />
        </a>
        <figcaption>EF Core Sample Project</figcaption>
    </figure>
    <p>The following are <code>Student</code> and <code>Grade</code> classes.</p>

    <pre class="csharpcode">
<span class="kwrd">public</span> <span class="kwrd">class</span> <span class="userclass">Student</span>
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> StudentId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> FirstName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> LastName { get; set; }

    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="userclass">Grade</span> Grade { get; set; }
}
       
<span class="kwrd">public</span> <span class="kwrd">class</span> <span class="userclass">Grade</span>
{
     <span class="kwrd">public</span> Grade()
     {
         Students = <span class="kwrd">new</span> <span class="userclass">List</span>&lt;<span class="userclass">Student</span>&gt;();
     }

    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> GradeName { get; set; }

    <span class="kwrd">public</span> <span class="userclass">IList</span>&lt;<span class="userclass">Student</span>&gt; Students { get; set; }
}
</pre>
    <p>The following is our context class <code>SchoolDbContext</code> created in the <a href="entity-framework-core-dbcontext.aspx.html">Create DbContext</a> chapter.</p>
    <pre class="csharpcode">
<span class="kwrd">public</span> <span class="kwrd">class</span> <span class="userclass">SchoolContext</span> : <span class="userclass">DbContext</span>
{       
    <span class="rem">//entities</span>
    <span class="kwrd">public</span> <span class="userclass">DbSet</span>&lt;<span class="userclass">Student</span>&gt; Students { get; set; }
    <span class="kwrd">public</span> <span class="userclass">DbSet</span>&lt;<span class="userclass">Grade</span>&gt; Grades { get; set; }

    <span class="kwrd">protected</span> <span class="kwrd">override</span> <span class="kwrd">void</span> OnConfiguring(<span class="userclass">DbContextOptionsBuilder</span> optionsBuilder)
    {
        optionsBuilder.UseSqlServer(<span class="str">"Server=(localdb)\\mssqllocaldb;Database=SchoolDB;Trusted_Connection=True;"</span>);
    }
} 
</pre>

    <p>
        EF Core provides migrations commands to create, update, or remove tables and other DB objects based on the entities and configurations. 
        At this point, there is no <code>SchoolDB</code> database. So, we need to create the database from the model (entities and configurations) by adding a migration.
    </p>

    <p>
        You can execute migration commands using Package Manager Console, PowerShell or <a href="https://learn.microsoft.com/en-us/ef/core/cli/dotnet" target="_blank" class="external-link">.NET Core CLI tools</a> as per your choice.
        Microsoft recommends .NET Core CLI tools because it runs on all platforms. Since we are using Visual Studio so we will use Package Manager Console commands (PMC and PowerShell commands are same).
    </p>

    <p>
        In Visual Studio, open NuGet Package Manager Console from Tools -&gt; NuGet Package Manager -&gt; Package Manager Console and enter the following command:
    </p>

    <div class="outputLabel">Package Manager Console/PowerShell</div>
    <samp>add-migration InitialSchoolDB</samp>

    <p>Make sure that Default Project points to where your context and entities are, and then execute the command, as shown below.</p>


    <figure class="thumbnail center-block">
        <a href="../images/efcore/migration1.png" target="_blank">
            <img alt="" src="../images/efcore/migration1.png" /></a>
    </figure>
    <p>
        If you use .NET Core CLI, then enter the following command.
    </p>

    <div class="outputLabel">.NET Core CLI</div>
    <samp>dotnet ef  migrations add InitialSchoolDB</samp>
    <p>
        This will create a new folder named <strong>Migrations</strong> in the project and create the ModelSnapshot files, as shown below.
    </p>
    <figure class="thumbnail center-block">
        <a href="../images/efcore/migration2.png" target="_blank">
            <img alt="" src="../images/efcore/migration2.png" /></a>
    </figure>

    <p>
        The <code>Add-Migration</code> command does not create the database. It just creates the two snapshot files in the Migrations folder.
    </p>
    <ol>
        <li>
            <strong>&lt;timestamp&gt;_&lt;Migration Name&gt;.cs: </strong>The main migration file which includes migration operations in the <code>Up()</code> and <code>Down()</code> methods. The <code>Up()</code> method includes the code for creating DB objects and the <code>Down()</code> method includes code for removing DB objects.
        </li>

        <li>
            <strong>&lt;contextclassname&gt;ModelSnapshot.cs:</strong> A snapshot of your current model. This is used to determine what changed when creating the next migration.
        </li>
    </ol>
    <p>Now, to create a database, use the <code>update-database</code> command in the Package Manager Console, as shown below.</p>
    <div class="outputLabel">Package Manager Console/PowerShell</div>
    <samp>update-database â€“verbose</samp>
    <p>
        The following executes the <code>update-database</code> command and creates the database, as shown below. The <code>-verbose</code> option shows the logs while creating the database.
    It creates a database with the name and location specified in the connection string in the <code>UseSqlServer()</code> method. 
        It creates a table for each entity, <code>Student</code> and <code>Grade</code>). It also creates  <code>_EFMigrationHistory</code> table that stores history of migrations applied overtime.
    </p>
    <figure class="thumbnail center-block">
        <a href="../images/efcore/migration3.png" target="_blank">
            <img alt="" src="../images/efcore/migration3.png" /></a>
    </figure>
    <p>
        Use the following command in .NET Core CLI to create a database.
    </p>

    <div class="outputLabel">.NET Core CLI</div>
    <samp>dotnet ef database update</samp>




    <h2>Apply Migrations for Modified Entities/Configurations</h2>

    <p>
        Suppose we add some new entities or modify an existing entities or changed any configuration, then we again need to execute the <code>add-migration</code> and <code>update-migration</code> commands to apply changes to the database schema.
    </p>
    <p>
        For example, let's modify the <code>Student</code> entity and add some properties, as shown below.
    </p>
    <pre class="csharpcode">
<span class="kwrd">public</span> <span class="kwrd">class</span> <span class="userclass">Student</span>
{
    <span class="kwrd">public</span> <span class="kwrd">int</span> StudentId { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> FirstName { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">string</span> LastName { get; set; }
    <span class="kwrd">public</span> <span class="userclass">DateTime</span> DateOfBirth { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">byte</span>[] Photo { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">decimal</span> Height { get; set; }
    <span class="kwrd">public</span> <span class="kwrd">float</span> Weight { get; set; }

    <span class="kwrd">public</span> <span class="kwrd">int</span> GradeId { get; set; }
    <span class="kwrd">public</span> <span class="userclass">Grade</span> Grade { get; set; }
}
</pre>
    <p>Now, to sync our "SchoolDB" database with this changes, execute the following commands:</p>
    <div class="outputLabel">Package Manager Console/PowerShell</div>
    <samp>
        add-migration "ModifiedStudentEntity"
        <br />
    </samp>
    <p>This will generate another snapshot in the Migrations folder.</p>
    <figure class="thumbnail center-block">
        <a href="../images/efcore/migration5.png" target="_blank">
            <img alt="" src="../images/efcore/migration5.png" /></a>
    </figure>
    <p>
        Now, to update the database schema, execute the <code>update-database</code> command in PMC/PowerShell.
        This will add the columns in the <code>Student</code> table, as shown below.
    </p>
    <figure class="thumbnail center-block">
        <a href="../images/efcore/migration6.png" target="_blank">
            <img alt="" src="../images/efcore/migration6.png" /></a>
    </figure>
    <p>In this way, you can keep adding, modifying or removing entities from EF Core model and sync the database using migrations.</p>
    <h2>Reverting Migration</h2>
    <p>
        For some reason, if you want to revert the database to any of the previous state then you can do it by using the <code>update-database &lt;migration-name&gt;</code> command.
    </p>
    <p>
        For example, we modified the <code>Student</code> entity and added some more properties. But now we want to revert it back to same as "InitialSchoolDB" migration.
        We can do it by using the following command:
    </p>
    <div class="outputLabel">Package Manager Console/PowerShell</div>
    <samp>
        Update-database "InitialSchoolDB"
    </samp>

    <div class="outputLabel">.NET Core CLI</div>
    <samp>
        dotnet ef database update "InitialSchoolDB".
    </samp>



    <figure class="thumbnail center-block">
        <a href="../images/efcore/migration7.png" target="_blank">
            <img alt="" src="../images/efcore/migration7.png" /></a>
    </figure>
    <p>
        The above command will revert the database based on a migration named <code>InitialSchoolDB</code> and remove all the changes applied for the second migration <code>ModifiedStudentEntity</code>. 
    This will also remove <code>ModifiedStudentEntity</code> entry from the <code>__EFMigrationsHistory</code> table in the database.
    </p>
    <figure class="thumbnail center-block">
    <a href="../images/efcore/migration8.png" target="_blank">
        <img alt="" src="../images/efcore/migration8.png" /></a>
</figure>
    <h2>List All Migrations</h2>
    <p>Use the following migration command to get the list of all migrations.</p>
    <samp>
    Get-Migration
</samp>

<div class="outputLabel">.NET Core CLI</div>
<samp>
    dotnet ef migrations list
</samp>
    <p>The following lists all migrations:</p>
        <figure class="thumbnail center-block">
    <a href="../images/efcore/migration11.png" target="_blank">
        <img alt="" src="../images/efcore/migration11.png" /></a>
</figure>
    <h2>Removing a Migration</h2>

    <p>
        Above, we have reverted the second migration named "ModifiedStudentEntity". We can remove the last migration if it is not applied to the database. 
    Let's remove the Use the "ModifiedStudentEntity" file using the following remove commands.
    </p>

    <div class="outputLabel">Package Manager Console/PowerShell</div>
    <samp>
        remove-migration
    </samp>

    <div class="outputLabel">.NET Core CLI</div>
    <samp>
        dotnet ef migrations remove
    </samp>
            <figure class="thumbnail center-block">
    <a href="../images/efcore/migration10.png" target="_blank">
        <img alt="" src="../images/efcore/migration10.png" /></a>
</figure>
    <p>
        The above commands will remove the last migration and revert the model snapshot to the previous migration, as shown below. Please note that if a migration is already applied to the database, then it will throw the exception.

    </p>
        <figure class="thumbnail center-block">
    <a href="../images/efcore/migration12.png" target="_blank">
        <img alt="" src="../images/efcore/migration12.png" /></a>
</figure>
   

                        
<div class="row">
    <hr />
    
    
    <div class="col-xl-12 text-center">
       <div id="124859-19"><script src="http://ads.themoneytizer.com/s/gen.js?type=19"></script><script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=19"></script></div>
    </div>

</div>

                        
<div class="navigation ">
    <div class="row">
        <div class="col-6  text-left mb-2 mb-sm-0" id="divPrev1">
            <a id="ctl00_eftNextPrevious1_lnkPrev1" class="btn  rounded-0" href="db-connection-strings.aspx.html"><i class="fa fa-angle-left mr-1"></i> Previous</a>
        </div>
        <div class="col-6 text-right float-right" id="divNext1">
            <a id="ctl00_eftNextPrevious1_lnkNext1" class="btn rounded-0" href="generate-sql-script.aspx.html">Next <i class="fa fa-angle-right ml-1"></i></a>
        </div>
    </div>
</div>

                    </div>
                    
                    
<div class=" d-none d-xl-block col-xl-4 rightSidebar">
    <div class="row">
        <div class="col-12">
            <div class="popular-articles col-12">
                <ul class="list-group article-items one">
                    
                    <li class="list-group-item intro"><a href="https://entityframework-extensions.net/fastest-way-to-insert?z=eft-tl" onclick="_gaq.push(['_trackEvent', 'ef_ext_tl', 'click', 'LINK CLICK', 1, true]);" target="_blank" rel="nofollow  noreferrer" title="Improve EF performance using Entity Framework Extension">Fastest Way to Insert using EF Extensions</a></li>
                    <li class="list-group-item intro"><a href="https://www.tutorialsteacher.com" target="_blank" title="C#, ASP.NET MVC, LINQ, TypeScript, Node.js, TypeScirpt">Learn C#, MVC, ASP.NET Core, LINQ</a></li>

                </ul>
            </div>

            
            <div class="mt-3 ml-2">
                <div id="124859-2">
                    <script src="http://ads.themoneytizer.com/s/gen.js?type=2"></script>
                    <script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=2"></script>
                </div>
            </div>
            
            
            
            
            
            <div class="mt-3 ml-2" id="stickyAdDiv">
                <div id="124859-3"><script src="http://ads.themoneytizer.com/s/gen.js?type=3"></script><script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=3"></script></div>
            </div>
        </div>


    </div>
</div>

                </div>
            </div>
            
<footer class="section footer pt-5">
    <div class="footer-main">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-7">
                    <div class="row">
                        <div class="col-md-5 ">
                            <div class="edugate-widget widget">
                                <div class="title-widget">EntityFrameworkTutorial</div>
                                <div class="content-widget">
                                    <p>
                                        Learn Entity Framework using simple yet practical examples on EntityFrameworkTutorial.net for free.
                                        Learn Entity Framework DB-First, Code-First and EF Core step by step.
                                        While using this site, you agree to have read and accepted our terms
                                        of use and <a href="../privacy-policy.aspx.html" class="privacypolicy">privacy policy</a>.
                                    </p>
                                    <div class="info-list">
                                        <ul class="list-unstyled">
                                            <li><i class="fa fa-envelope-o"></i><a class="mail" href="../cdn-cgi/l/email-protection.html#b1d7d4d4d5d3d0d2daf1d4dfc5d8c5c8d7c3d0dcd4c6dec3dac5c4c5dec3d8d0dd9fdfd4c5"><span class="__cf_email__" data-cfemail="dabcbfbfbeb8bbb9b19abfb4aeb3aea3bca8bbb7bfadb5a8b1aeafaeb5a8b3bbb6f4b4bfae">[email&#160;protected]</span></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="useful-link-widget widget">
                                <div class="title-widget">Tutorials</div>
                                <div class="content-widget">
                                    <div class="useful-link-list">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-6">
                                                <ul class="list-unstyled">
                                                    <li><i class="fa fa-angle-right"></i><a href="../basics/what-is-entity-in-entityframework.aspx.html">EF Basics</a></li>
                                                    <li><i class="fa fa-angle-right"></i><a href="entity-framework-core.aspx.html">EF Core</a></li>
                                                </ul>
                                            </div>
                                            <div class="col-md-6 col-sm-6 ">
                                                <ul class="list-unstyled">
                                                    <li><i class="fa fa-angle-right"></i><a href="../entityframework6/introduction.aspx.html">EF 6 DB-First</a></li>
                                                    <li><i class="fa fa-angle-right"></i><a href="../code-first/what-is-code-first.aspx.html">EF 6 Code-First</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="row">
                        <div class="col-md-12 ">
                            <div class="mailing-widget widget">
                                <div class="title-widget">E-mail list</div>
                                <div class="content-wiget">
                                    <p>
                                        Subscribe to EntityFrameworkTutorial email list and get EF 6 and EF Core Cheat Sheets, latest updates, tips &amp;
                                        tricks about Entity Framework to your inbox.
                                    </p>
                                    <form action="http://entityframeworktutorial.us13.list-manage.com/subscribe/post-json?u=659e2cbd2829799e7dc94ae35&amp;id=93dae2ea03" method="post" id="subscribe-form" name="subscribe-form" class="validate" novalidate>
                                        <div class="input-group">
                                            <input type="text" placeholder="Email address" class="form-control form-email-widget" name="MERGE0" id="MERGE0" size="25" /><span class="input-group-btn"><input type="submit" value="Go" name="subscribe" id="mc-embedded-subscribe" class="btn btn-email" /></span>
                                        </div>

                                        <div id="mce-responses" class="clear">
                                            <div class="response" id="mce-error-response" style="display: none"></div>
                                            <div class="response" id="mce-success-response" style="display: none"></div>
                                        </div>
                                        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                        <div style="position: absolute; left: -5000px;" aria-hidden="true">
                                            <input type="text" name="b_659e2cbd2829799e7dc94ae35_93dae2ea03" tabindex="-1" value="" />
                                        </div>
                                        <div class="alert-success" id="successMsg"></div>
                                        <div class="alert-danger" id="failMsg"></div>

                                    </form>
                                    <p>We respect your privacy.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row hyperlink text-center text-md-left">
                <div class="col-md-6 hyper-left">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="../aboutme.aspx.html">ABOUT ME</a></li>
                        <li class="list-inline-item"><a href="../privacy-policy.aspx.html">PRIVACY POLICY</a></li>
                        <li class="list-inline-item"><a href="../terms-of-use.aspx.html">TERMS OF USE</a></li>
                    </ul>
                </div>
                <div class="col-md-6 hyper-right text-center text-md-right">
                    <i class="fa fa-copyright" aria-hidden="true"></i> 2023 EntityFrameworkTutorial.net. All Rights Reserved.
                </div>
            </div>
        </div>
    </div>
    
</footer>
   <div id="124859-6"><script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="http://ads.themoneytizer.com/s/gen.js?type=6"></script><script src="http://ads.themoneytizer.com/s/requestform.js?siteId=124859&amp;formatId=6"></script></div>

        </section>
    </div>
    <script src="../scripts/jquery.min.js"></script>
    
    <script src="../scripts/popper.1.12.9.min.js"></script>
    <script src="../App_Themes/bs/bootstrap.min.js"></script>
    <script src="http://www.entityframeworktutorial.net/scripts/eftGeneralScript.min.js?v=1.3"></script>
    <script type="text/javascript" src="http://cdn.pubguru.com/fb.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            stickTLMenus();
            stickyAd();
            var temp = $(window).height();

            $('#back-top a').addClass('d-none');
            $(window).scroll(function () {
                stickTLMenus();
                stickyAd();

                if ($(window).scrollTop() > temp) {
                    $('#back-top a').addClass('d-block');
                    $('#back-top a').removeClass('d-none');
                }
                else {
                    $('#back-top a').addClass('d-none');
                    $('#back-top a').removeClass('d-block');
                }
            });
            var path = $(location).attr('pathname');
            $('#leftmenu li a[href="' + path + '"]').addClass('active');
            $('#topMenu ul li a[href="/efcore/entity-framework-core.aspx"]').addClass('active');

            maintainLeftMenuPos();
            $("#subscribe-form").on("submit", function (s) { s.preventDefault(), submitSubscribeForm($("#subscribe-form")) })
        });
    </script>
</body>
</html>
